<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Solicitud Licencia de Conducir</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

<div class="form-wrapper">

    <h1>SOLICITUD LICENCIA DE CONDUCIR</h1>

    <!-- FOTO DEL TITULAR -->
    <label>* FOTO DEL TITULAR (TOMAR CON CÁMARA)</label>
    <button class="btn-camera" onclick="openCamera()">Tomar fotografía</button>
    <input type="hidden" id="foto_url">

    <div id="photo-preview" class="photo-preview" style="display:none;">
        <p>Foto cargada correctamente</p>
        <img id="final-photo">
    </div>

    <!-- FOTO DOCUMENTO -->
    <label>* FOTO DE IDENTIFICACIÓN (INE / DOCUMENTO)</label>
    <button class="btn-camera" onclick="openCameraDoc()">Tomar foto del documento</button>
    <input type="hidden" id="foto_documento_url">

    <div id="photo-preview-doc" class="photo-preview" style="display:none;">
        <p>Documento cargado correctamente</p>
        <img id="final-photo-doc">
    </div>

    <!-- FIRMA -->
    <label>* FIRMA DEL TITULAR</label>
    <button class="btn-camera" onclick="openSignature()">Capturar firma</button>
    <input type="hidden" id="firma_url">

    <div id="signature-preview" class="photo-preview" style="display:none;">
        <p>Firma cargada correctamente</p>
        <img id="final-signature">
    </div>

    <!-- DATOS PERSONALES -->
    <h2 class="admin-trigger">DATOS PERSONALES</h2>

    <label>* TELÉFONO (WHATSAPP)</label>
    <input id="telefono" maxlength="10">

    <label>* TIPO DE LICENCIA</label>
    <select id="tipo_licencia">
        <option value="">Seleccionar…</option>
        <option>CHOFER-C</option>
        <option>AUTOMOVILISTA-A</option>
        <option>MOTOCICLISTA-M</option>
    </select>

    <label>* VALIDA POR</label>
    <select id="valida_por">
        <option value="">Seleccionar…</option>
        <option>3 AÑOS $650</option>
        <option>5 AÑOS $700</option>
    </select>

    <label>* NOMBRE COMPLETO</label>
    <input id="nombre">

    <label>* CURP</label>
    <input id="curp" maxlength="18">

    <label>* CON BASE EN LOS LINEAMIENTOS… ¿ESTÁ DE ACUERDO?</label>
    <select id="domicilio">
        <option value="">Seleccionar…</option>
        <option>SI</option>
    </select>

    <small>
        Como la licencia se tramita en Guerrero, se pide que salga con un domicilio de aquí.
        En caso de no tener domicilio, saldrá con el del ayuntamiento donde se realiza el trámite.
    </small>

    <label>* ALERGIAS / RESTRICCIONES</label>
    <input id="alergias">

    <label>* TIPO DE SANGRE</label>
    <select id="sangre">
        <option value="">Seleccionar…</option>
        <option>AB+</option><option>AB-</option>
        <option>A+</option><option>A-</option>
        <option>B+</option><option>B-</option>
        <option>O+</option><option>O-</option>
        <option>DESCONOCE</option>
    </select>

    <label>* CONTACTO EMERGENCIA</label>
    <input id="emergencia_nombre">
    <label>* TEL. EMERGENCIA</label>
    <input id="emergencia_tel" maxlength="10">

    <h2 class="admin-trigger">DATOS PARA ENVÍO</h2>

    <!-- PANEL SECRETO -->
    <div id="admin-panel" style="display:none;">
        <h2>FOTOS CARGADAS</h2>
        <div id="file-list"></div>
    </div>

    <label>* NOMBRE DESTINATARIO</label>
    <input id="dest_nombre">

    <label>* TELÉFONO DESTINATARIO</label>
    <input id="dest_tel" maxlength="10">

    <label>* CALLE</label>
    <input id="calle">

    <label>* NUM EXT</label>
    <input id="numero_ext">

    <label>* COLONIA</label>
    <input id="colonia">

    <label>* CÓDIGO POSTAL</label>
    <input id="cp" maxlength="5">

    <label>* CIUDAD</label>
    <input id="ciudad">

    <label>* ESTADO</label>
    <select id="estado">
        <option value="">Seleccionar…</option>
        <option>Guerrero</option>
        <option>Estado de México</option>
        <option>CDMX</option>
    </select>

    <button class="btn-submit" onclick="enviarWhatsApp()">Enviar</button>

</div>

<!-- MODAL DE CÁMARA ORIGINAL -->
<div id="camera-modal" class="camera-modal">

    <video id="camera" autoplay playsinline></video>
    <img id="overlay" class="overlay">

    <button id="btn-capture" class="btn-capture" onclick="capture()">Capturar</button>
    <button id="btn-close" class="btn-close" onclick="closeCamera()">Cerrar</button>

    <div id="preview-area" class="preview-area">
        <img id="preview-photo">

        <button onclick="acceptPhoto()" class="btn-accept">Usar esta foto</button>
        <button onclick="retakePhoto()" class="btn-retake">Repetir</button>
        <button onclick="cancelPhoto()" class="btn-cancel">Cancelar</button>
    </div>

</div>

<!-- MODAL FIRMA -->
<div id="signature-modal" class="camera-modal" style="display:none;">
    <p class="signature-instruction">Dibuja tu firma dentro del recuadro</p>

    <canvas id="signature-canvas"></canvas>

    <button onclick="saveSignature()" class="btn-accept">Confirmar firma</button>
    <button onclick="clearSignature()" class="btn-retake">Limpiar</button>
    <button onclick="closeSignature()" class="btn-cancel">Cancelar</button>
</div>

<div id="loader" class="loader-overlay">
    <div class="loader-box">
        <div class="spinner"></div>
        <p>Procesando...</p>
    </div>
</div>

<script src="camera.js"></script>

</body>
</html>
