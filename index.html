<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Solicitud Licencia de Conducir</title>
    <link rel="stylesheet" href="style.css" />
</head>

<body>

<div class="container">

    <h2 style="text-align:center; color:#0b6e4f;">
        SOLICITUD LICENCIA DE CONDUCIR
    </h2>

    <!-- FOTO DEL TITULAR -->
    <label>* FOTO DEL TITULAR (TOMAR CON CÁMARA)</label>
    <button onclick="openCamera()">Tomar fotografía</button>
    <div id="photo-preview" style="display:none; margin-bottom:20px;">
        <img id="final-photo" style="width:100%; border-radius:10px;" />
    </div>

    <!-- FOTO DEL DOCUMENTO -->
    <label>* FOTO DE IDENTIFICACIÓN (INE / DOCUMENTO)</label>
    <button onclick="openCameraDoc()">Tomar foto del documento</button>
    <div id="photo-preview-doc" style="display:none; margin-bottom:20px;">
        <img id="final-photo-doc" style="width:100%; border-radius:10px;" />
    </div>

    <!-- FIRMA -->
    <label>* FIRMA DEL TITULAR</label>
    <button onclick="openSignature()">Capturar firma</button>
    <div id="signature-preview" style="display:none; margin-bottom:20px;">
        <img id="final-signature" style="width:100%; background:white; border-radius:10px;" />
    </div>

    <!-- CAMPOS OCULTOS -->
    <input type="hidden" id="foto_url">
    <input type="hidden" id="foto_documento_url">
    <input type="hidden" id="firma_url">

    <!-- DATOS PERSONALES -->
    <h3>DATOS PERSONALES</h3>

    <label>* TELÉFONO (WHATSAPP)</label>
    <input id="telefono" type="number" required>

    <label>* TIPO DE LICENCIA</label>
    <select id="tipo_licencia">
        <option value="">Seleccionar…</option>
        <option>CHOFER-C</option>
        <option>AUTOMOVILISTA-A</option>
        <option>MOTOCICLISTA-M</option>
    </select>

    <label>* VALIDA POR</label>
    <select id="valida">
        <option value="">Seleccionar…</option>
        <option>3 AÑOS $650</option>
        <option>5 AÑOS $700</option>
    </select>

    <label>* NOMBRE COMPLETO</label>
    <input id="nombre" type="text">

    <label>* CURP</label>
    <input id="curp" type="text">

    <label>* CON BASE EN LOS LINEAMIENTOS… ¿ESTÁ DE ACUERDO?</label>
    <select id="acepta">
        <option value="">Seleccionar…</option>
        <option>Sí</option>
        <option>No</option>
    </select>

    <label>ALERGIAS O RESTRICCIONES</label>
    <input id="alergias" type="text">

    <label>* TIPO DE SANGRE</label>
    <select id="tipo_sangre">
        <option value="">Seleccionar…</option>
        <option>AB+</option><option>AB-</option>
        <option>A+</option><option>A-</option>
        <option>B+</option><option>B-</option>
        <option>O+</option><option>O-</option>
        <option>Desconoce</option>
    </select>

    <label>* CONTACTO EN CASO DE EMERGENCIA (NOMBRE Y TELÉFONO)</label>
    <input id="contacto" type="text">

    <!-- DATOS DE ENVÍO -->
    <h3 ondblclick="mostrarPanel()">DATOS PARA ENVÍO</h3>

    <label>* NOMBRE DESTINATARIO</label>
    <input id="destinatario" type="text">

    <label>* TELÉFONO DESTINATARIO</label>
    <input id="telefono_dest" type="number">

    <label>* CALLE</label>
    <input id="calle" type="text">

    <label>* NÚMERO EXT</label>
    <input id="numero" type="text">

    <label>* COLONIA</label>
    <input id="colonia" type="text">

    <label>* CÓDIGO POSTAL</label>
    <input id="cp" type="number">

    <label>* CIUDAD</label>
    <input id="ciudad" type="text">

    <label>* ESTADO</label>
    <select id="estado">
        <option value="">Seleccionar…</option>
        <option>Estado de México</option>
        <option>Guerrero</option>
        <option>CDMX</option>
        <option>Jalisco</option>
        <option>Puebla</option>
        <option>Querétaro</option>
        <!-- Agrega más aquí -->
    </select>

    <button style="margin-top:20px;" onclick="enviarWhatsApp()">Enviar en WhatsApp</button>

</div>

<!-- PANEL OCULTO DE IMÁGENES -->
<div id="panel" style="
    display:none;
    position:fixed;
    inset:0;
    background:#000c;
    padding:20px;
    overflow:auto;
    z-index:999999;">
    
    <input id="pass" type="password" placeholder="Contraseña" style="
        width:100%; padding:12px; border-radius:10px; border:none; margin-bottom:10px;">
    <button onclick="validarPass()">Entrar</button>

    <div id="panel-content" style="display:none; color:white;"></div>
</div>

<!-- MODAL WHATSAPP PRO -->
<div id="camera-modal" class="wa-modal">

    <div class="wa-header">
        <button class="wa-close-btn" onclick="closeCamera()">✕</button>
        <span class="wa-header-title">Cámara</span>
    </div>

    <div class="wa-video-container">
        <video id="camera" autoplay playsinline></video>
        <img id="overlay" class="wa-overlay" src="">
    </div>

    <div class="wa-capture-container" id="wa-capture-buttons">
        <button class="wa-capture-btn" onclick="capture()"></button>
    </div>

    <div id="preview-area" class="wa-preview">
        <img id="preview-photo" class="wa-preview-img">

        <div class="wa-preview-actions">
            <button class="wa-use-btn" onclick="acceptPhoto()">Usar foto</button>
            <button class="wa-retake-btn" onclick="retakePhoto()">Repetir</button>
            <button class="wa-close2-btn" onclick="cancelPhoto()">Cancelar</button>
        </div>
    </div>

</div>

<!-- FIRMA -->
<div id="signature-modal" class="wa-modal">
    <div class="wa-header">
        <button class="wa-close-btn" onclick="closeSignature()">✕</button>
        <span class="wa-header-title">Firma</span>
    </div>

    <p class="signature-instruction">Dibuja tu firma dentro del recuadro</p>
    <canvas id="signature-canvas"></canvas>

    <div style="padding:15px;">
        <button class="wa-use-btn" onclick="saveSignature()">Confirmar firma</button>
        <button class="wa-retake-btn" onclick="clearSignature()">Limpiar</button>
        <button class="wa-close2-btn" onclick="closeSignature()">Cancelar</button>
    </div>
</div>

<!-- LOADER -->
<div id="loader">
    <div>
        <div class="spinner"></div>
        <div class="loader-text">Procesando...</div>
    </div>
</div>

<script src="camera.js"></script>
<script src="main.js"></script>

</body>
</html>
